// Generated by CoffeeScript 1.3.3
(function() {
  var Opal, extension, extensions, fs, version, _i, _len;

  version = '0.3.22';

  extensions = ['.opal', '.rb'];

  fs = require('fs');

  Opal = require("" + __dirname + "/opal-" + version).Opal;

  exports.Opal = Opal;

  require("" + __dirname + "/opal-parser-" + version);

  Opal.source = function() {
    return this._source || (this._source = fs.readFileSync("" + __dirname + "/opal-" + version + ".js").toString());
  };

  Opal.parserSource = function() {
    return this._parserSource || (this._parserSource = fs.readFileSync("" + __dirname + "/opal-parser-" + version + ".js").toString());
  };

  Opal.parse = function(filename) {
    var fileSource;
    fileSource = fs.readFileSync("" + filename).toString();
    return Opal.Opal.Parser.$new().$parse(fileSource);
  };

  for (_i = 0, _len = extensions.length; _i < _len; _i++) {
    extension = extensions[_i];
    require.extensions[extension] = function(module, filename) {
      var content, source;
      source = Opal.parse(filename);
      source = source.replace(/\/\/= require ([^;]+);/, 'require("$1");');
      content = "var Opal = require('opal').Opal;\n(" + source + ")();";
      return module._compile(content, filename);
    };
  }

}).call(this);
